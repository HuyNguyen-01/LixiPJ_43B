// This file was generated by SquareLine Studio
// SquareLine Studio version: SquareLine Studio 1.5.4
// LVGL version: 8.3.6
// Project name: Lixi_Project

#include "ui.h"
#include <Arduino.h>

//Modify Include-----------------

#include <stdlib.h>
//Modify Extern
extern void saveConfig_c(const char* ssid, const char* pass, const char* ip);

//Modify Varible
lv_obj_t * ui_prev_screen = NULL;

// static const uint16_t money_list[] = {10, 20, 50, 100, 200, 500};
// #define MONEY_COUNT (sizeof(money_list) / sizeof(money_list[0]))
extern uint16_t money_list[9];
extern int active_money_count;


//Modify Function---------------------------



////////////////////////////////////

void ui_RollOffline(lv_event_t * e)
{
  
    uint16_t value = money_list[rand() % active_money_count];

    /* 2. Phân tích hàng số */
    uint8_t hundreds = value / 100;
    uint8_t tens     = (value / 10) % 10;
    uint8_t ones     = value % 10;

    lv_obj_set_style_anim_time(ui_RollerHundreds, 4000, 0);
    lv_obj_set_style_anim_time(ui_RollerTens, 3000, 0);
    lv_obj_set_style_anim_time(ui_RollerOnes, 2000, 0);

    /* 4. Chọn item mục tiêu với animation */
    lv_roller_set_selected(ui_RollerHundreds, hundreds+10, LV_ANIM_ON);
    lv_roller_set_selected(ui_RollerTens, tens+10, LV_ANIM_ON);
    lv_roller_set_selected(ui_RollerOnes, ones+10, LV_ANIM_ON);
}

void ui_RollOnline(lv_event_t * e)
{
	// Your code here
}

void ui_BackToPreScreen(lv_event_t * e)
{
	if (ui_prev_screen == NULL) {
      // Nếu NULL, đổi text của Label1 thành LOI
      // ui_Label1 đã có sẵn trong ui.h nên bạn gọi trực tiếp được
      lv_label_set_text(ui_Label1, "LOI");
  } 
  else if (ui_prev_screen == ui_Screen4) {
      // Nếu là Screen 1
      _ui_screen_change(&ui_Screen4, LV_SCR_LOAD_ANIM_NONE, 0, 0, &ui_Screen4_screen_init);
  } 
  else if (ui_prev_screen == ui_Screen5) {
      // Nếu là Screen 2
      _ui_screen_change(&ui_Screen5, LV_SCR_LOAD_ANIM_NONE, 0, 0, &ui_Screen5_screen_init);
  }
  else if (ui_prev_screen == ui_Screen3) {
      lv_label_set_text(ui_Label1, "SCREEN3");
  }
}

void ui_ApplySetting(lv_event_t * e)
{
	const char * s = lv_textarea_get_text(ui_TextAreWifiName);
  const char * p = lv_textarea_get_text(ui_TextAreWifiPass);
  const char * i = lv_textarea_get_text(ui_TextAreIP);

  // Gọi hàm đã khai báo extern
  saveConfig_c(s, p, i);
}

void ui_HideKeyboard(lv_event_t * e)
{
	// Your code here
}



void SavePreChangeSettingScreen(lv_event_t * e)
{
  ui_prev_screen = lv_scr_act();
  _ui_screen_change(&ui_Screen3, LV_SCR_LOAD_ANIM_NONE, 0, 0, &ui_Screen3_screen_init);
}


